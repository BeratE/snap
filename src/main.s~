;; Assembler directives  
.p816 	; 65816 processor
.i16    ; X/Y are 16 bits
.a8     ; A is 8 bits

;; ROM Header - At the End of Bank 0, $40 Bytes of cartridge Information.
.segment "HEADER"        	; +$7FC0 in file
	.byte "CA65 EXAMPLE"	; ROM Title

.segment "ROMINFO"      ; +$7FD5 in file
	.byte $30       ; ROM Makeup - LoROM, fast-capable
	.byte 0         ; ROM Type   - No battery RAM
	.byte $07       ; ROM Size   - 128K ROM
	.byte 0		; SRAM Size
	.byte 0,0	; Creator License ID Code
	.byte 0		; Version Number   
	.word $AAAA	; Checksum Complement
	.word $5555    	; Checksum

.segment "VECTORS"
	.word 0, 0, 0, 0, 0, 0, 0, 0
	.word 0, 0, 0, 0, 0, 0, reset, 0

.segment "CODE"

reset:
	clc             ; native mode
	xce
	rep #$10        ; X/Y 16-bit
	sep #$20        ; A 8-bit

	; Clear PPU registers
	ldx #$33
@loop:  stz $2100,x
	stz $4200,x
	dex
	bpl @loop

	; Set background color to $03E0
	lda #$E0
	sta $2122
	lda #$03
        sta $2122

	; Maximum screen brightness
	lda #$0F
	sta $2100

forever:
	jmp forever
